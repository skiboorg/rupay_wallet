"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[481],{69481:(e,l,a)=>{a.r(l),a.d(l,{default:()=>B});var t=a(61758),o=a(38734),u=a(58790),n=a(3388),r=a(7757),s=a(41640),d=a(60455),i=a(77854),c=a(59033),v=a(39713),p=a(95522),b=a(10577),_=function(e,l,a,t){function o(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,u){function n(e){try{s(t.next(e))}catch(l){u(l)}}function r(e){try{s(t["throw"](e))}catch(l){u(l)}}function s(e){e.done?a(e.value):o(e.value).then(n,r)}s((t=t.apply(e,l||[])).next())}))};const f={key:0},y=(0,t.Lk)("p",{class:"text-bold no-margin"},"Приватный раунд",-1),m={class:"absolute-full flex flex-center"},g={class:"text-bold"},k={class:"text-bold"},x={class:"text-bold"},R={key:0,class:"text-bold"},h={key:1,class:"q-pa-md"},w=(0,t.Lk)("p",null,"Введите реферальный код пригласителя",-1),F=(0,t.pM)({__name:"taxi",setup(e){const{p2pUser:l,getP2PUser:a}=(0,s.P)(),{address:F,allAssets:A}=(0,c.G)(),{rupayStats:C}=(0,b.u)(),{toast:q,Icon:K,Color:L}=(0,p.d)(),P=((0,d.lq)(),(0,o.KR)({}),(0,o.KR)("main"),(0,o.KR)(0),(0,o.KR)(0)),T=((0,o.KR)([]),(0,o.KR)(!1)),V=(0,o.KR)(null),B=(0,o.KR)(),Q=()=>_(this,void 0,void 0,(function*(){T.value=!T.value;const e=yield i.rupayApi.post("/api/p2p/save_code",{wallet:F,used_ref_code:V.value});e.data.success?(q(e.data.message,K.info,L.info),yield a()):q(e.data.message,K.error,L.error),T.value=!T.value})),U=(0,t.EW)((()=>{var e,l,a;if(P.value){let t=parseFloat(parseFloat(null===(e=B.value)||void 0===e?void 0:e.buy_course)+parseFloat((null===(l=B.value)||void 0===l?void 0:l.buy_course)*(null===(a=B.value)||void 0===a?void 0:a.buy_commission))).toFixed(2);return parseFloat(parseFloat(P.value)/t).toFixed(8)}}));(0,t.sV)((()=>{B.value=A.find((e=>1048648===e.key))}));const E=()=>_(this,void 0,void 0,(function*(){T.value=!T.value;const e=yield i.nodeApi.post("/api/data/create_payment_olf_ex",{wallet:F,type:"CARD",want_to_buy:U.value,amount:P.value,currency:"CryptoTaxi",asset_id:1048648,redirect_url:"https://app.rupay.pro",callback_url:"https://rupay.pro/api/data/p2play_url_result_cc"});T.value=!T.value,e.data.success?window.location.href=e.data.url:q(JSON.stringify(e.data.message),K.error,L.error)}));return(e,a)=>{const s=(0,t.g2)("q-badge"),d=(0,t.g2)("q-linear-progress"),i=(0,t.g2)("q-btn"),c=(0,t.g2)("q-input"),p=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(p,{padding:""},{default:(0,t.k6)((()=>[(0,t.bF)(n.A,{title:"CryptoTaxi"},{default:(0,t.k6)((()=>{var e,n,p,b;return[(null===(e=(0,o.R1)(l))||void 0===e?void 0:e.used_reffer_code)?((0,t.uX)(),(0,t.CE)("div",f,[y,(0,t.bF)(d,{size:"40px",value:parseFloat((0,o.R1)(C).total_crypto_taxi)/2e8,color:"primary",class:"q-mb-md"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",m,[(0,t.bF)(s,{color:"accent","text-color":"primary",class:"text-bold q-pa-sm",label:`${(0,o.R1)(C).total_crypto_taxi} / 20млн`},null,8,["label"])])])),_:1},8,["value"]),(0,t.Lk)("p",g,"Количество реффералов в 1й линии: "+(0,u.v_)(null===(n=(0,o.R1)(l))||void 0===n?void 0:n.first_line_count),1),(0,t.Lk)("p",k,[(0,t.eW)("Ваш реферальный код: "+(0,u.v_)(null===(p=(0,o.R1)(l))||void 0===p?void 0:p.own_reffer_code)+" ",1),(0,t.bF)(i,{color:"blue-7","text-color":"dark",onClick:a[0]||(a[0]=e=>{var a;return(0,o.R1)(v.$r)(null===(a=(0,o.R1)(l))||void 0===a?void 0:a.own_reffer_code,"Код скопирован")}),round:"",dense:"",unelevated:"",icon:"las la-clipboard"})]),(0,t.Lk)("p",x,"Курс покупки: "+(0,u.v_)(null===(b=B.value)||void 0===b?void 0:b.buy_course)+" RUB",1),(0,t.bF)(c,{modelValue:P.value,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value=e),type:"number",dense:"",label:"Введите сумму пополнения в RUB",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),U.value?((0,t.uX)(),(0,t.CE)("p",R,"Вы получите: "+(0,u.v_)(U.value)+" CRYPTO TAXI TOKEN",1)):(0,t.Q3)("",!0),(0,t.bF)(r.A,{label:"Купить",loading:T.value,"no-caps":"",class:"full-width invertBtn",unelevated:"",onClick:E,disable:!U.value||parseInt(P.value)<100},null,8,["loading","disable"])])):((0,t.uX)(),(0,t.CE)("div",h,[w,(0,t.bF)(c,{dense:"",modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=e=>V.value=e),outlined:"",class:"q-mb-md"},null,8,["modelValue"]),(0,t.bF)(r.A,{label:"Сохранить",loading:T.value,"no-caps":"",class:"full-width invertBtn",unelevated:"",onClick:Q,disable:!V.value},null,8,["loading","disable"])]))]})),_:1})])),_:1})}}});var A=a(33177),C=a(42876),q=a(44031),K=a(69001),L=a(68926),P=a(98582),T=a.n(P);const V=F,B=V;T()(F,"components",{QPage:A.A,QLinearProgress:C.A,QBadge:q.A,QBtn:K.A,QInput:L.A})}}]);