(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[575],{55575:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>me});var a=n(61758),l=n(22675),s=n.n(l),o=n(38734),i=n(60455),u=n(58790),r=n(39713),c=n(95522),d=n(81750);const v={class:"pincode-panel"},p={class:"flex gap-4 justify-center q-mb-sm"},g=["data-number"],m=["data-number"],h={class:"text-center q-mb-sm text-weight-medium text-body1"},b={class:"pincode-wrapper"};var f,k;(function(e){e["init"]="init",e["repeat"]="repeat"})(f||(f={})),function(e){e["inputPassword"]="Введите пароль",e["createPassword"]="Придумайте пароль",e["repeatPassword"]="Подтвердите пароль"}(k||(k={}));const x=(0,a.pM)({__name:"PinCode",props:{digitsNumber:{type:Number,required:!0},needConfirm:{type:Boolean,required:!1,default:!1}},emits:["new-pincode","entered-pincode"],setup(e,{emit:t}){const{toast:n,Icon:l,Color:s}=(0,c.d)(),i=e,x=t,y=(0,o.KR)([1,2,3,4,5,6,7,8,9,"0"]),C=(0,o.KR)(f.init),w=(0,o.KR)([]),E=(0,o.KR)([]),X=(0,o.KR)(""),_=()=>{C.value===f.init?w.value.splice(w.value.length-1,1):E.value.splice(E.value.length-1,1)},A=e=>{C.value===f.init&&w.value.push(e),C.value===f.repeat&&E.value.push(e)};return(0,a.wB)(w,(e=>{e.length===i.digitsNumber&&(i.needConfirm?(y.value,C.value=f.repeat,X.value=k.repeatPassword):x("entered-pincode",w.value.join("")))}),{deep:!0}),(0,a.wB)(E,(e=>{if(e.length===i.digitsNumber){const e=(0,r.ww)(w.value,E.value);d.log(e),e?x("new-pincode",E.value.join("")):(n("Пароли не совпадают",l.error,s.error),C.value=f.init,w.value=[],E.value=[],X.value=k.createPassword,y.value)}}),{deep:!0}),(0,a.sV)((()=>{i.needConfirm?X.value=k.createPassword:X.value=k.inputPassword})),(t,n)=>{const l=(0,a.g2)("q-btn");return(0,a.uX)(),(0,a.CE)("div",v,[(0,a.Lk)("div",p,[e.needConfirm?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(e.digitsNumber,((e,t)=>((0,a.uX)(),(0,a.CE)("span",{class:"pin-input","data-number":C.value===f.init?w.value[t]?w.value[t]:"⚬":E.value[t]?E.value[t]:"⚬",key:t},null,8,g)))),128)):((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(e.digitsNumber,((e,t)=>((0,a.uX)(),(0,a.CE)("span",{class:"pin-input","data-number":w.value[t]?"*":"",key:t},null,8,m)))),128))]),(0,a.Lk)("p",h,(0,u.v_)(X.value),1),(0,a.Lk)("div",b,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(y.value,(e=>((0,a.uX)(),(0,a.Wv)(l,{"no-caps":"",push:"","text-color":"dark",color:"accent",size:"16px",class:(0,u.C4)(["number",{hidden:10===e}]),onClick:t=>A(e),key:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e),1)])),_:2},1032,["class","onClick"])))),128)),(0,a.bF)(l,{"no-caps":"",push:"","text-color":"dark",color:"accent",size:"16px",class:"number",onClick:_,icon:"las la-backspace"})])])}}});var y=n(12807),C=n(69001),w=n(98582),E=n.n(w);const X=(0,y.A)(x,[["__scopeId","data-v-d8fac0c0"]]),_=X;E()(x,"components",{QBtn:C.A});var A=n(40364),K=n(7711),N=n(7757),R=n(59033),F=n(77474),L=n(3388),Q=n(81750),q=function(e,t,n,a){function l(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a["throw"](e))}catch(t){s(t)}}function u(e){e.done?n(e.value):l(e.value).then(o,i)}u((a=a.apply(e,t||[])).next())}))};const P={key:0,class:"flex column flex-col justify-center items-center"},W={key:1},I={key:0,class:"text-center"},V={key:0,class:"text-negative"},j=(0,a.Lk)("p",{class:"text-center q-mb-sm text-weight-medium text-body1"},"или",-1);var B;(function(e){e[e["hashExists"]=0]="hashExists",e[e["hashNotExists"]=1]="hashNotExists"})(B||(B={}));const M=(0,a.pM)({__name:"Login",emits:["need-register"],setup(e,{emit:t}){const n=A.A.get("hash"),l=(0,R.G)(),{toast:s,Icon:u,Color:d}=(0,c.d)(),{addAddress:v}=(0,F.Z)(),p=(0,o.KR)(null),g=(0,o.KR)(B.hashExists),m=(0,i.rd)(),h=(0,o.Kh)({seed:null,password:null}),b=(0,o.Kh)({hash:null,password:null}),f=()=>{Q.log("blur");const e=/^[A-Za-z0-9]+$/;if(!e.test(h.seed))return!1;p.value=[43,44,86,87,88].includes(h.seed.length)},k=e=>q(this,void 0,void 0,(function*(){l.setSeed(e),yield v(),yield l.initWallet(),yield m.push("/")})),x=e=>q(this,void 0,void 0,(function*(){h.password=e,(0,r.n1)(h),yield k(h.seed)})),y=e=>q(this,void 0,void 0,(function*(){b.hash=n,b.password=e;const t=(0,r.rW)(b);t?(Q.log("good"),yield k(t)):s("Пароль неверный",u.error,d.error)}));return(0,a.KC)((()=>{g.value=n?B.hashExists:B.hashNotExists})),(e,t)=>{const n=(0,a.gN)("auto-animate");return(0,a.bo)(((0,a.uX)(),(0,a.Wv)(L.A,{title:"Вход",cls:"text-center"},{default:(0,a.k6)((()=>[g.value===B.hashExists?((0,a.uX)(),(0,a.CE)("div",P,[(0,a.bF)(_,{"digits-number":4,class:"q-mb-md",onEnteredPincode:y}),(0,a.bF)(N.A,{label:"Забыл пароль","text-color":"negative",onClick:(0,o.R1)(l).logout},null,8,["onClick"])])):(0,a.Q3)("",!0),g.value===B.hashNotExists?((0,a.uX)(),(0,a.CE)("div",W,[p.value?((0,a.uX)(),(0,a.Wv)(_,{key:1,"digits-number":4,"need-confirm":"",onNewPincode:x})):((0,a.uX)(),(0,a.CE)("div",I,[(0,a.bF)(K.A,{modelValue:h.seed,"onUpdate:modelValue":t[0]||(t[0]=e=>h.seed=e),label:"Ваш сид"},null,8,["modelValue"]),!1===p.value?((0,a.uX)(),(0,a.CE)("p",V,"Неверный сид")):(0,a.Q3)("",!0),h.seed?((0,a.uX)(),(0,a.Wv)(N.A,{key:1,color:"accent","text-color":"dark",class:"q-mb-md",push:"",onClick:f,label:"Проверить сид"})):(0,a.Q3)("",!0),j,(0,a.bF)(N.A,{color:"accent","text-color":"dark",push:"",onClick:t[1]||(t[1]=t=>e.$emit("need-register")),label:"Создать кошелек"})]))])):(0,a.Q3)("",!0)])),_:1})),[[n]])}}}),T=M,U=T;var S=function(e,t,n,a){function l(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a["throw"](e))}catch(t){s(t)}}function u(e){e.done?n(e.value):l(e.value).then(o,i)}u((a=a.apply(e,t||[])).next())}))};const Z={key:0,class:"flex flex-col gap-2"},$=["innerHTML"],z={key:0,class:"text-center full-width"},G={key:1},H={key:2},Y=(0,a.Lk)("p",{class:"text-bold text-overline no-margin"}," Ваш сид :",-1),D={class:"no-margin text-caption"},J=(0,a.Lk)("p",{class:"text-bold text-red text-overline no-margin"},"Внимание!",-1),O=(0,a.Lk)("p",{class:"text-red text-caption no-margin"},"Скопируйте ваш сид (секретный ключ) и сохраните его в максимально защищенном месте. Ни в коем случае не делитесь и никому не сообщайте ваш сид (секретный ключ)!!!",-1),ee={key:0},te=(0,a.pM)({__name:"Register",setup(e){const{generateSeed:t}=(0,F.Z)(),n=(0,R.G)(),{addAddress:l}=(0,F.Z)(),s=(0,o.KR)(1),c=(0,o.KR)(!1),d=(0,i.rd)(),v=(0,o.Kh)({seed:null,password:null}),p=(0,o.KR)([{id:0,text:"Я согласен с тем, что доступ к сиду и ключам, имеется только у меня. При утере сида, доступ к счетам будет <strong>невозможно</strong> восстановить",agree:!1},{id:1,text:"Я согласен с тем, что <strong>при передаче сида</strong> третьим лицам, я могу <strong>лишиться всех средств</strong> находящихся на счетах",agree:!1},{id:2,text:'Я <strong>прочитал</strong> и согласен с  <a target="_blank" class="font-semibold underline" href="https://rupay.pro/rupay_user_agreement.pdf">пользовательским соглашением</a> об общих условиях использования мобильного платежного приложения «RUPAY»',agree:!1}]),g=(0,a.EW)((()=>{let e=!0;return p.value.forEach((t=>{e=e&&t.agree})),e})),m=e=>S(this,void 0,void 0,(function*(){s.value=3,v.password=e,v.seed=yield t()})),h=()=>{(0,r.$r)(v.seed,"Сид скопирован"),c.value=!0},b=()=>S(this,void 0,void 0,(function*(){(0,r.n1)(v),n.setSeed(v.seed),yield l(),yield n.initWallet(),yield d.push("/")}));return(e,t)=>{const n=(0,a.g2)("q-toggle"),l=(0,a.g2)("q-card-section"),o=(0,a.gN)("auto-animate");return(0,a.uX)(),(0,a.Wv)(L.A,{title:`Регистрация. Шаг ${s.value}`},{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",null,[1===s.value?(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",Z,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(p.value,((e,t)=>((0,a.uX)(),(0,a.Wv)(n,{modelValue:e.agree,"onUpdate:modelValue":t=>e.agree=t,"checked-icon":"check",color:"green","unchecked-icon":"clear",class:"text-caption q-mb-md",style:{"line-height":"110%"}},{default:(0,a.k6)((()=>[(0,a.Lk)("p",{class:"no-margin text-gold",innerHTML:e.text},null,8,$)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),256)),g.value?((0,a.uX)(),(0,a.CE)("div",z,[(0,a.bF)(N.A,{class:"invertBtn",onClick:t[0]||(t[0]=e=>s.value=2),label:"Продолжить регистрацию"})])):(0,a.Q3)("",!0)])),[[o]]):(0,a.Q3)("",!0),2===s.value?((0,a.uX)(),(0,a.CE)("div",G,[(0,a.bF)(_,{"digits-number":4,"need-confirm":"",onNewPincode:m})])):(0,a.Q3)("",!0),3===s.value?(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",H,[(0,a.bF)(l,{class:"bg-grey-invert q-mb-md"},{default:(0,a.k6)((()=>[Y,(0,a.Lk)("p",D,(0,u.v_)(v.seed),1)])),_:1}),(0,a.bF)(N.A,{onClick:h,class:"q-mb-md invertBtn",label:"Скопировать сид"}),(0,a.bF)(l,{class:"bg-grey-invert q-mb-md"},{default:(0,a.k6)((()=>[J,O])),_:1}),c.value?((0,a.uX)(),(0,a.CE)("div",ee,[(0,a.bF)(N.A,{class:"w-full invertBtn",onClick:b,label:"Продолжить"})])):(0,a.Q3)("",!0)])),[[o]]):(0,a.Q3)("",!0)])),[[o]])])),_:1},8,["title"])}}});var ne=n(90449),ae=n(27066);const le=te,se=le;E()(te,"components",{QToggle:ne.A,QCardSection:ae.A});var oe=n(10577),ie=n(43710);const ue=e=>((0,a.Qi)("data-v-aace2ffe"),e=e(),(0,a.jt)(),e),re={class:"container"},ce={class:"auth-container"},de=ue((()=>(0,a.Lk)("div",{class:"flex column items-center justify-center"},[(0,a.Lk)("img",{class:"logo",src:s()})],-1))),ve={class:"full-height flex column justify-center"},pe=(0,a.pM)({__name:"index",setup(e){const{isRupayNetworkUp:t}=(0,oe.u)(),n=((0,ie.A)(),(0,o.KR)("login"));return(e,t)=>{const l=(0,a.gN)("auto-animate");return(0,a.uX)(),(0,a.CE)("div",re,[(0,a.Lk)("div",ce,[de,(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",ve,["login"===n.value?((0,a.uX)(),(0,a.Wv)(U,{key:0,onNeedRegister:t[0]||(t[0]=e=>n.value="register")})):(0,a.Q3)("",!0),"register"===n.value?((0,a.uX)(),(0,a.Wv)(se,{key:1})):(0,a.Q3)("",!0)])),[[l]])])])}}}),ge=(0,y.A)(pe,[["__scopeId","data-v-aace2ffe"]]),me=ge},22675:(e,t,n)=>{e.exports=n.p+"img/logo.6194fb28.webp"}}]);