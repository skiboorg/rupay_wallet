"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[750],{63750:(e,a,l)=>{l.r(a),l.d(a,{default:()=>X});var t=l(61758),n=l(38734),i=l(58790),o=l(3388),s=l(19056),u=l(77474),c=l(95522),d=l(7757),r=l(38861),m=l(60455),v=l(81750),p=l(8522)["Buffer"],g=function(e,a,l,t){function n(e){return e instanceof l?e:new l((function(a){a(e)}))}return new(l||(l=Promise))((function(l,i){function o(e){try{u(t.next(e))}catch(a){i(a)}}function s(e){try{u(t["throw"](e))}catch(a){i(a)}}function u(e){e.done?l(e.value):n(e.value).then(o,s)}u((t=t.apply(e,a||[])).next())}))};const b={key:0,class:"q-mb-lg"},h=(0,t.Lk)("p",{class:"text-center text-weight-medium"},"или",-1),y={key:1,class:""},f=(0,t.Lk)("p",{class:"text-weight-medium"},"Информация о пользователе",-1),k={class:"row q-col-gutter-md q-mb-lg"},w={class:"col-6"},R={class:"col-6"},q=(0,t.Lk)("p",{class:"q-mb-none text-weight-medium"},"ФИО",-1),x={class:"q-mb-none text-caption"},L=(0,t.Lk)("p",{class:"q-mb-none text-weight-medium"},"Пол",-1),A={class:"q-mb-none text-caption"},C=(0,t.Lk)("p",{class:"q-mb-none text-weight-medium"},"Дата рождения",-1),_={class:"q-mb-none text-caption"},F=(0,t.Lk)("p",{class:"text-negative"},"Верификация может занять до 1 минуты, пожалуйста не покидайте сраницу до получения ответа от сервера",-1),Q=(0,t.pM)({__name:"verify",setup(e){const{toast:a,Icon:l,Color:Q}=(0,c.d)(),{registerPersonCertify:V,signTransaction:K}=(0,u.Z)(),T=(0,m.rd)();let E=(0,n.KR)(!1),P=(0,n.KR)(null),W=(0,n.KR)(),I=(0,n.KR)(),X=(0,n.KR)();const D=()=>g(this,void 0,void 0,(function*(){v.log(W.value),P.value&&S(),W.value&&(yield U())})),S=()=>{const e=new FileReader;e.addEventListener("load",(()=>g(this,void 0,void 0,(function*(){W.value=e.result,yield U()}))),!1),P.value&&e.readAsText(P.value)},U=()=>g(this,void 0,void 0,(function*(){E.value=!E.value;const e=yield s.EraChain.Type.PersonHuman.parse(W.value);v.log(e),X.value=e,I.value={name:e.name,desc:e.description,image:"data:image/png;base64,"+p.from(e.image).toString("base64"),birthday:e.birthday,deathday:e.deathday,gender:e.gender},E.value=!E.value})),B=()=>g(this,void 0,void 0,(function*(){E.value=!E.value;const e=yield V(X.value);if(v.log(e),e.raw){yield r.era.broadcast(e.raw);a("Пользователь верифицирован",l.success,Q.success),yield T.back()}E.value=!E.value}));return(e,a)=>{const l=(0,t.g2)("q-file"),s=(0,t.g2)("q-input"),u=(0,t.g2)("q-img"),c=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(c,{padding:""},{default:(0,t.k6)((()=>[(0,t.bF)(o.A,{title:"Верифицировать пользователя"},{default:(0,t.k6)((()=>[(0,n.R1)(X)?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",b,[(0,t.bF)(l,{modelValue:(0,n.R1)(P),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(P)?P.value=e:P=e),accept:".txt",dense:"",label:"Выберите файл с RAW кодом",outlined:"",clearable:"",class:"q-mb-md"},null,8,["modelValue"]),h,(0,t.bF)(s,{class:"q-mb-md",outlined:"",modelValue:(0,n.R1)(W),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.i9)(W)?W.value=e:W=e),type:"textarea",dense:"",label:"Вставьте RAW код"},null,8,["modelValue"]),(0,t.bF)(d.A,{onClick:D,"no-caps":"",unelevated:"",class:"full-width q-py-md",color:"primary",label:"Проверить RAW"})])),(0,n.R1)(I)?((0,t.uX)(),(0,t.CE)("div",y,[f,(0,t.Lk)("div",k,[(0,t.Lk)("div",w,[(0,t.bF)(u,{src:(0,n.R1)(I).image},null,8,["src"])]),(0,t.Lk)("div",R,[q,(0,t.Lk)("p",x,(0,i.v_)((0,n.R1)(I).name),1),L,(0,t.Lk)("p",A,(0,i.v_)(0===(0,n.R1)(I).gender?"М":"Ж"),1),C,(0,t.Lk)("p",_,(0,i.v_)(new Date((0,n.R1)(I).birthday).toLocaleDateString()),1)])]),F,(0,t.bF)(d.A,{onClick:B,loading:(0,n.R1)(E),"no-caps":"",unelevated:"",class:"full-width q-py-md",color:"primary",label:"Верифицировать"},null,8,["loading"])])):(0,t.Q3)("",!0)])),_:1})])),_:1})}}});var V=l(33177),K=l(68433),T=l(68926),E=l(65287),P=l(98582),W=l.n(P);const I=Q,X=I;W()(Q,"components",{QPage:V.A,QFile:K.A,QInput:T.A,QImg:E.A})}}]);