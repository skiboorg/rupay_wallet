"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[553],{14553:(e,l,a)=>{a.r(l),a.d(l,{default:()=>O});var t=a(61758),u=a(38734),n=a(3388),s=a(59033),o=a(24029),d=a(29104),r=a(58790),i=a(7711),m=a(7757),c=a(77474),v=a(52664),p=a(77854),b=a(81750),y=function(e,l,a,t){function u(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,n){function s(e){try{d(t.next(e))}catch(l){n(l)}}function o(e){try{d(t["throw"](e))}catch(l){n(l)}}function d(e){e.done?a(e.value):u(e.value).then(s,o)}d((t=t.apply(e,l||[])).next())}))};const k={class:"text-weight-medium no-margin"},g=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Выберите платежную систему",-1),_=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Введите номер карты",-1),f=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Введите номер телефона получателя",-1),h=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Введите название банка получателя",-1),F=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Введите ФИО получателя",-1),w=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Введите сумму вывода RupayRub",-1),V={key:2,class:"text-bold"},q={class:"text-negative"},A=.025,x=5e3,Q=(0,t.pM)({__name:"Rub",setup(e){const l=(0,u.KR)("form"),{getFee:a,signTransaction:n}=(0,c.Z)(),{getAssetByKey:o,address:Q,person:R}=(0,s.G)(),{withdrawalRequest:W}=(0,v.Z)(),X=(0,u.KR)(),K=(0,u.KR)(!1),L=(0,u.KR)(),U=[{label:"Карта любого банка РФ",value:"card"},{label:"СБП",value:"sbp"}],C=(0,u.KR)([]),E=(0,u.Kh)({asset:null,amount:null,wallet_rupay:null,card:null,phone:null,bank:null,fio:null,payment_details:null}),T=(0,u.Kh)({asset_key:null,wallet:Q,amount:null,amount_init:null,payment_details:null,payment_type:null,id:null}),z=(0,t.EW)((()=>{if(E.amount&&parseFloat(E.amount)>=x){let e=parseFloat(E.amount)*A;return parseInt(parseFloat(E.amount)-e)}}));(0,t.sV)((()=>y(this,void 0,void 0,(function*(){var e;X.value=o("1048643"),T.asset_key=null===(e=X.value)||void 0===e?void 0:e.key;const l=yield p.nodeApi.get(`/api/data/withdrawal_history/${Q}`);C.value=l.data}))));const S=()=>y(this,void 0,void 0,(function*(){var e;K.value=!K.value;const l=yield a(null===(e=X.value)||void 0===e?void 0:e.key,E.amount,"7JXmTnbwuDnpqQ3NwxwzhfGgDk223j13eP","Вывод RUB","Вывод RUB");if(l.success){const e=yield n(l.raw);e.success&&("card"===L.value.value?T.payment_details=E.card:T.payment_details=`${E.phone},${E.bank},${E.fio}`,T.id=e.result.signature,T.amount=z.value,T.amount_init=E.amount,T.payment_type=L.value.value,b.log(T),yield W(T,null===R||void 0===R?void 0:R.name))}K.value=!K.value}));return(e,a)=>{const u=(0,t.g2)("q-tab"),n=(0,t.g2)("q-tabs"),s=(0,t.g2)("q-separator"),o=(0,t.g2)("q-select"),c=(0,t.g2)("q-input"),v=(0,t.g2)("q-form"),p=(0,t.g2)("q-tab-panel"),b=(0,t.g2)("q-item-section"),y=(0,t.g2)("q-item"),A=(0,t.g2)("q-list"),Q=(0,t.g2)("q-tab-panels"),R=(0,t.g2)("q-card"),W=(0,t.gN)("touch-swipe");return(0,t.uX)(),(0,t.Wv)(R,{flat:"",bordered:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(n,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),"indicator-color":"transparent",class:"shadow-2",align:"justify","active-color":"dark","active-bg-color":"tab"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{"no-caps":"",name:"form",label:"Вывод"}),(0,t.bF)(u,{"no-caps":"",name:"history",label:"История"})])),_:1},8,["modelValue"])),[[W]]),(0,t.bF)(s),(0,t.bF)(Q,{modelValue:l.value,"onUpdate:modelValue":a[7]||(a[7]=e=>l.value=e),animated:""},{default:(0,t.k6)((()=>[(0,t.bF)(p,{name:"form",class:"overflow-hidden"},{default:(0,t.k6)((()=>[(0,t.bF)(v,{onSubmit:(0,d.D$)(S,["prevent"])},{default:(0,t.k6)((()=>{var e;return[(0,t.Lk)("p",k," Доступный баланс для вывода: "+(0,r.v_)(null===(e=X.value)||void 0===e?void 0:e.balance.own)+" RupayRub",1),(0,t.Lk)("p",{class:"text-weight-medium"}," Минимальная сумма вывода "+(0,r.v_)(x)+" RupayRub"),g,(0,t.bF)(o,{outlined:"",dense:"",options:U,modelValue:L.value,"onUpdate:modelValue":a[1]||(a[1]=e=>L.value=e),behavior:"menu","lazy-rules":"",rules:[e=>e||"Это обязательное поле"]},null,8,["modelValue","rules"]),L.value&&"card"===L.value.value?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[_,(0,t.bF)(c,{dense:"",outlined:"",modelValue:E.card,"onUpdate:modelValue":a[2]||(a[2]=e=>E.card=e),mask:"#### #### #### ####","fill-mask":"#","lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле"]},null,8,["modelValue","rules"])],64)):(0,t.Q3)("",!0),L.value&&"sbp"===L.value.value?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[f,(0,t.bF)(c,{dense:"",outlined:"",modelValue:E.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>E.phone=e),mask:"+7###########","lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле"]},null,8,["modelValue","rules"]),h,(0,t.bF)(c,{dense:"",outlined:"",modelValue:E.bank,"onUpdate:modelValue":a[4]||(a[4]=e=>E.bank=e),"lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле"]},null,8,["modelValue","rules"]),F,(0,t.bF)(c,{dense:"",outlined:"",modelValue:E.fio,"onUpdate:modelValue":a[5]||(a[5]=e=>E.fio=e),"lazy-rules":"",rules:[e=>e&&e.length>0||"Это обязательное поле"]},null,8,["modelValue","rules"])],64)):(0,t.Q3)("",!0),w,(0,t.bF)(i.A,{modelValue:E.amount,"onUpdate:modelValue":a[6]||(a[6]=e=>E.amount=e),clearable:"","lazy-rules":"",marginBottom:!1,rules:[e=>e&&e.length>0||"Это обязательное поле",e=>e&&e>=x||`Не менее ${x}₽`]},null,8,["modelValue","rules"]),z.value?((0,t.uX)(),(0,t.CE)("p",V,[(0,t.eW)("Внимание! Вы получите "),(0,t.Lk)("span",q,(0,r.v_)(z.value)+" RUB",1)])):(0,t.Q3)("",!0),(0,t.bF)(m.A,{"is-tx-button":"",class:"full-width invertBtn",loading:K.value,label:"Запрос на вывод",type:"submit"},null,8,["loading"])]})),_:1})])),_:1}),(0,t.bF)(p,{name:"history"},{default:(0,t.k6)((()=>[(0,t.bF)(A,null,{default:(0,t.k6)((()=>[(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)("Дата/Время")])),_:1}),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)("Сумма")])),_:1}),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)("Статус")])),_:1})])),_:1}),(0,t.bF)(s),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(C.value.filter((e=>1048643===e.asset.key)),(e=>((0,t.uX)(),(0,t.Wv)(y,{key:e.id},{default:(0,t.k6)((()=>[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(new Date(e.created_at).toLocaleString()),1)])),_:2},1024),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.amount),1)])),_:2},1024),null===e.is_done?((0,t.uX)(),(0,t.Wv)(b,{key:0,class:"text-grey-5"},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.status),1)])),_:2},1024)):(0,t.Q3)("",!0),!0===e.is_done?((0,t.uX)(),(0,t.Wv)(b,{key:1,class:"text-positive"},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.status),1)])),_:2},1024)):(0,t.Q3)("",!0),!1===e.is_done?((0,t.uX)(),(0,t.Wv)(b,{key:2,class:"text-negative"},{default:(0,t.k6)((()=>[(0,t.eW)((0,r.v_)(e.status),1)])),_:2},1024)):(0,t.Q3)("",!0)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}});var R=a(97569),W=a(64873),X=a(26721),K=a(37015),L=a(64082),U=a(63815),C=a(21565),E=a(88515),T=a(68926),z=a(54514),S=a(75329),B=a(63418),$=a(35724),I=a(98582),P=a.n(I);const D=Q,G=D;P()(Q,"components",{QCard:R.A,QTabs:W.A,QTab:X.A,QSeparator:K.A,QTabPanels:L.A,QTabPanel:U.A,QForm:C.A,QSelect:E.A,QInput:T.A,QList:z.A,QItem:S.A,QItemSection:B.A}),P()(Q,"directives",{TouchSwipe:$.A});const N={key:0,class:"text-bold text-center"},j=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Выберите актив",-1),M=(0,t.Lk)("p",{class:"text-grey-7 q-mb-sm"},"Выберите тип вывода",-1),Z=(0,t.pM)({__name:"index",setup(e){const{person:l,allAssets:a}=(0,s.G)(),d=[{label:"На адрес кошелька в другой сети",value:"address"},{label:"Конвертировать в Рубли и перевести на карту любого банка РФ",value:"card"},{label:"Конвертировать в Рубли и перевести по СБП",value:"sbp"}],r=(0,u.KR)(),i=(0,u.KR)();return(e,s)=>{const m=(0,t.g2)("q-select"),c=(0,t.g2)("q-page"),v=(0,t.gN)("auto-animate");return(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c,{padding:""},{default:(0,t.k6)((()=>[(0,t.bF)(n.A,{title:"Выберите актив для вывода"},{default:(0,t.k6)((()=>[(0,u.R1)(l)?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[j,(0,t.bF)(o.A,{class:"q-mb-md",assets:(0,u.R1)(a).filter((e=>e.can_withdrawal)),"is-withdrawal-list":"",onAssetSelected:s[0]||(s[0]=e=>r.value=e)},null,8,["assets"])],64)):((0,t.uX)(),(0,t.CE)("p",N,"Вывод доступен только верифицированным пользователям"))])),_:1}),r.value?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[1048643===r.value.key?((0,t.uX)(),(0,t.Wv)(G,{key:0})):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[M,(0,t.bF)(m,{dense:"",outlined:"",options:d,modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),behavior:"menu",label:"Выберите тип вывода","lazy-rules":"",rules:[e=>e||"Это обязательное поле"]},null,8,["modelValue","rules"])],64))],64)):(0,t.Q3)("",!0)])),_:1})),[[v]])}}});var J=a(33177);const H=Z,O=H;P()(Z,"components",{QPage:J.A,QSelect:E.A})}}]);